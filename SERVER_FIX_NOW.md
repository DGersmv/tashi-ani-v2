# üîß –°–†–û–ß–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ù–ê –°–ï–†–í–ï–†–ï

## –ü—Ä–æ–±–ª–µ–º–∞
Next.js –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –≤–Ω–µ—à–Ω–µ–º –∞–¥—Ä–µ—Å–µ `192.168.0.2:3000` –≤–º–µ—Å—Ç–æ `127.0.0.1:3000`, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º –Ω–∞–ø—Ä—è–º—É—é –∏ —É—è–∑–≤–∏–º—ã–º –¥–ª—è –∞—Ç–∞–∫.

## –†–µ—à–µ–Ω–∏–µ

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
cd /var/www/tashi-ani

# 1. –û–±–Ω–æ–≤–∏—Ç–µ package.json
git pull origin master

# –ò–õ–ò –≤—Ä—É—á–Ω—É—é –∏—Å–ø—Ä–∞–≤—å—Ç–µ start —Å–∫—Ä–∏–ø—Ç:
# –û—Ç–∫—Ä–æ–π—Ç–µ package.json –∏ –∏–∑–º–µ–Ω–∏—Ç–µ:
# "start": "next start"
# –Ω–∞:
# "start": "next start -H 127.0.0.1 -p 3000"

# 2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å
pm2 delete tashi-ani

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
pm2 start npm --name "tashi-ani" -- start
pm2 save

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–ª—É—à–∞–µ—Ç —Ç–æ–ª—å–∫–æ localhost
sleep 2
sudo netstat -tulpn | grep :3000
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: 127.0.0.1:3000 –∏–ª–∏ ::1:3000
# –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: 0.0.0.0:3000 –∏–ª–∏ 192.168.x.x:3000

# 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
pm2 logs tashi-ani --lines 10 --nostream
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: "Local: http://127.0.0.1:3000"
# –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: "Network: http://192.168.x.x:3000"

# 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ nginx
curl -I https://tashi-ani.ru
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# 1. Next.js –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –¢–û–õ–¨–ö–û —á–µ—Ä–µ–∑ nginx
curl http://127.0.0.1:3000
# –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å

# 2. –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø —Å–Ω–∞—Ä—É–∂–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
# (–µ—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø —Å –¥—Ä—É–≥–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞)
# curl http://IP_–°–ï–†–í–ï–†–ê:3000
# –î–æ–ª–∂–Ω–æ –ù–ï —Ä–∞–±–æ—Ç–∞—Ç—å (—Ç–∞–π–º–∞—É—Ç –∏–ª–∏ –æ—Ç–∫–∞–∑)

# 3. –ß–µ—Ä–µ–∑ nginx –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å
curl https://tashi-ani.ru
# –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å
```

## –í–∞–∂–Ω–æ

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ Next.js –±—É–¥–µ—Ç —Å–ª—É—à–∞—Ç—å —Ç–æ–ª—å–∫–æ `127.0.0.1:3000`
- ‚úÖ –î–æ—Å—Ç—É–ø –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ nginx
- ‚úÖ –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ Next.js –±—É–¥–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
- ‚úÖ –ê—Ç–∞–∫–∏ –Ω–∞ –ø–æ—Ä—Ç 3000 –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å



